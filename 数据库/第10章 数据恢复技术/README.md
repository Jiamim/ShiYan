数据库恢复技术
========
##事务
事务（Transaction）是用户定义的一个数据库操作序列，是一个不可分割的工作单位。  
SQL中：
* BEGIIN TRANSACATION //打开一个事务
* COMMIT  //提交到数据库
* ROLLBACK //取消操作

>MySQL只有InnoDB引擎支持事务操作

###ACID
事务具有四个特性：
* 原子性（Atomicity）：事务是数据库的逻辑工作单位，事务中包括的诸操作要么都做，要们都不做。
* 一致性（Consistency）：事务执行的结果必须是使数据库从一个一致性状态变到另一个一致性状态。
* 隔离性（Isolation）：对并发执行而言，一个事务的执行不能被其他事务干扰。
* 持续性（Durability）：一个事务一旦提交，它对数据库中的数据的改变就应该是永久性的。
##数据库恢复概述
数据库管理员必须具有把数据库从错误状态恢复到某一已知的正确状态（亦称为一致状态或完整状态）的功能，这就是数据库的恢复
##故障
分类：
* 事务内部的故障
* 系统故障（软故障）
- 介质故障（硬故障）
- 计算机病毒

总结各类故障，对数据库的影响有两种可能性：
- 数据库本身被破坏
- 数据库本身没有被破坏，但数据可能不正确

##恢复
恢复的基本原理可以用一个词来概况：**冗余**。  
详细内容查看
* [恢复的实现技术](恢复的实现技术.md)
* [恢复策略](恢复策略.md)<kbd>重点</kbd>
  - 事务故障的恢复
  - 系统故障的恢复
  - 介质故障的恢复

##使用检查点的恢复技术
检查点（checkpoint）。教材10.6节。
##数据库镜像
根据DBA的要求，自动把整个数据库或其中的关键数据复制到奥另一个磁盘上。每当数据库更新时，DBMS自动把更新后的数据复制过去，即DBMS自动保证镜像数据与主数据库的一致性。  

这样一旦出现介质故障，可由镜像磁盘继续提供使用，同时DBMS自动利用镜像磁盘数据进行数据库恢复，不需要关闭系统和重装数据库副本。  
在没有出现故障的时候，数据镜像还可用于并发操作，即当一个用户对数据加**排他锁**修改数据时，其他用户可以读镜像数据库上的数据，而不必等待该用户释放锁。
