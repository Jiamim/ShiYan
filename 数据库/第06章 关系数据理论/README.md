关系数据理论
============
##关系模式
关系模式应当是个五元组`R(U,D,DOM,F)`:
* R是关系名，符号化的元组语义
* U是一组属性
* D是属性组U中的属性所来自的域
* DOM是属性到域的映射
* F是属性组U上一组数据依赖

D、DOM对于模式设计的关系不大，一般把关系模式看作三元组：`R<U,F>`
>当且仅当U上一个关系r满足F时，r称为关系模式R<U,F>的一个关系

##数据依赖
数据依赖是一个关系内部属性与属性之间的一种约束关系。是现实世界属性间相互联系的抽象，是数据内在的性质，是语义的体现。  
最重要的数据依赖有两种：
* 函数依赖
  * 平凡函数依赖/非平凡函数依赖
  * 完全函数依赖/部分函数依赖
  * 传递函数依赖/直接函数依赖
* 多值依赖

>注意，以下讨论的时候分清楚是**谁**对**谁**的**什么依赖**。

----------
###函数依赖
类似数学中的函数*y = f(x)*，当自变量x确定后，相应的函数值y也就唯一的确定了。  
比如描述一个学生的关系，可以有学号（Sno）、姓名（Sname）、系名（Sdept）等几个属性。由于一个学号只对应一个学生，一个学生只在一个系里学习，
所以当学号确定后，学生的姓名及其所在的系也就确定了。可以记作：Sno→Sname，Sno→Sdept，称之为，Sname和Sdept函数依赖于Sno。
####(非)平凡的函数依赖
* X → Y，但Y不属于X，则称 X→Y 是**非平凡函数依赖**。
* X → Y，但Y属于X，则称 X→Y 是**平凡函数依赖**。

####完全函数依赖
与**部分函数依赖**相对应，在R(U)中，如果X → Y，对于X的任何真子集X’,Y都不函数依赖于X’，称之为**Y对X完全函数依赖**。  
比如：
* (Sno,Cno) → Grade，是一个完全函数依赖（F），只有学号和课程一起，才能确定分数（Grade）
* (Sno,Cno) → Sdept，是部分函数依赖（P），因为仅仅由学号就能确定所在的系（Sdept）

###传递函数依赖
在R(U)中，如果X → Y，（Y不包含于X），~~Y → X~~，Y → Z，Z不属于Y，则称X → Z，称为**Z对X传递函数依赖**。  
如果X ? Y，则X → Z为**直接函数依赖**。

---------------
###多值依赖
设R(U)是属性集U上的一个关系模式。X、Y、Z是U的子集，并且Z = U - X - Y。关系模式R(U)中多值依赖
X →→ Y成立，当且仅当对R(U)的任一关系r，给定的一对(x,z)值，有一组Y的值，这组值仅仅决定与x值而与z值无关。

例如：关系模式WSC(W,S,C)中，W是仓库，S是保管员，C是商品。每个仓库有多个保管员，有多个商品。每个保管员保管所在仓库的所有商品，
每个商品属于所在仓库的所有保管员。此时S和C是一种交叉的关系（多对多）。而W →→ S，同样W →→ C，S与C是完全对称的。
 
>:loudspeaker:关系模式需要进行**规范化**，**不规范**的关系模式通常可能存在以下问题：
* 数据冗余太大
* 更新异常
* 插入异常
* 删除异常

##规范化
具体内容见[规范化](规范化.md)  
范式的包含关系：
>1NF
>>2NF
>>>3NF
>>>>BCNF
>>>>>4NF
>>>>>>5NF

本课程不必考虑5NF，只考虑多值依赖，4NF的关系模式规范化程度最高。5NF是消除了**连接依赖**。



