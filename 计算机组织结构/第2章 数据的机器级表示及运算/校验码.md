数据校验码
======
|校验码|分类|
|-----|----
|奇偶校验码|检错码
|海明校验码|纠错码
|CRC校验码|纠错码
内存校验常用奇偶检验码，而主机与磁盘等外设之间的数据传输采用CRC校验，网络里面的数据链路层也用到了CRC校验。
##奇偶校验码
在数据位基础上加一位冗余位，使数据编码的合法码中的1的个数恒为奇数或偶数。
若为奇数，则是奇校验码；若为偶数，则为偶校验码。
##海明校验码
Hamming校验码(因为提出人是Richard Hamming)，通常译作“海明”或“汉明”。不仅能检错，还能纠错。  
###基本思想
  对原数据码按某种规律分成若干组，每组安排一个校验位，进行奇偶校验。故又称为**分组奇偶校验码**。  

  设**有效数据位**为k位，**校验位**r位。要满足关系：
```
    2^r >= k+r+1
```
之所以最后**+1**，是要用一种状态表示**无错**。
###位置安排
校验位Pi在海明码中安排在位号为`2^(i-1)`的位置。其余位为数据位。从低到高位排列。  
注意：
* 位号从1数起
* 位号是从右向左递增的

###校验方法
海明码每一位码Hi由多个校验位校验。其关系是被校验的每一位号要等于校验它的各校验位位号之和。
###（7,4）海明码
即数据编码共有7位，其中4位校验位。  
设4位数据位为D`1`D`2`D`3`D`4`、3位校验位为P`1`P`2`P`3`。7位海明码为H`7`H`6`H`5`H`4`H`3`H`2`H`1`。即
```
    H7H6H5H4H3H2H1 = D4D3D2P3D1P2P1
```
>阿拉伯数字应写为下标的形式。

|海明码编号|数据位/校验位|参与校验的校验位号|校验原则|
|:------:|:-----:|:-----:|-----
|H`1`|P`1`|1|1 = 1
|H`2`|P`2`|2|2 = 2
|H`3`|D`1`|1、2|3 = 1 + 2
|H`4`|P`3`|4|4 = 4
|H`5`|D`2`|1、4|5 = 1 + 4
|H`6`|D`3`|2、4|6 = 2 + 4
|H`7`|D`4`|1、2、4|7 = 1 + 2 + 4
若采用偶校验，根据上表，可以得出三个校验位的偶校验关系式（⊕为异或操作）：
* P`1` = D`1`⊕D`2`⊕D`3`
* P`2` = D`1`⊕D`3`⊕D`4`
* P`3` = D`2`⊕D`3`⊕D`4`
   
由此，进一步可得三个状态的求解表达式：
* S`1` = P`1`⊕D`1`⊕D`2`⊕D`3`
* S`2` = P`2`⊕D`1`⊕D`3`⊕D`4`
* S`3` = P`3`⊕D`2`⊕D`3`⊕D`4`

**错误检测表**：

|S`3`S`2`S`1`|错误位置
|:------:|:------:
|000|无错
|001|H`1`错
|010|H`2`错
|011|H`3`错
|100|H`4`错
|101|H`5`错
|110|H`6`错
|111|H`7`错

##CRC校验码
即循环冗余校验码。具有较强的检验纠错能力。可以对大块数据进行校验，主要用于**主机与成组数据交换的设备之间的数据校验**。
###基本概念
任何一个二级in至序列都可以用一个唯一的多项式表示。如二进制数10110010可表示为：x^7 + X^5 + x^4 + x。
###编码过程
1. 设k位数据位的多项式为M(x)，将其左移r位，得到一个n=k+r位的多项式M(x)x^r，其中k为有效数据位，后r位是将要产生的校验位。  
2. 将M(x)x^r 除以一个r+1位的G(x)(生成多项式)，的到一个商Q(x)和一个余数R(x)，即`M(x)x^r = Q(x)G(x) + R(x)`。
R(x)即为M(x)所对应的校验位多项式。
3. T(x) = M(x)x^r + R(x)即为要发送的n=k+r位CRC校验码

>生成多项式G(x)最高幂次，就是校验位的个数（r）。

###检测
T(x)可以被G(x)整除，即余数为0，则无错。  
注意：这里的除指的是**模二除**，即不借位。
###举例
使用x^3 + x + 1对4位数据位1100进行CRC编码  
**解法**：  
1100对应的多项式为`M(x)=x^3 + x^2`  
∵G(x)的最高幂次是3  
∴r=3，即需要左移3位，得到1100000对应的多项式为`M(x)x^3`  
M(x)x^3/G(x) = 1100000/1011 = 1110(商)+010（余数）  
T(x)=1100000 + 010 = 1100010

